/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ui.table.Table");jQuery.sap.require("sap.ui.table.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ui.table.Table",{metadata:{publicMethods:["getSelectedIndices","addSelectionInterval","setSelectionInterval","removeSelectionInterval","isIndexSelected","clearSelection","selectAll","getContextByIndex"],library:"sap.ui.table",properties:{"width":{type:"sap.ui.core.CSSSize",group:"",defaultValue:'auto'},"rowHeight":{type:"int",group:"",defaultValue:22},"columnHeaderHeight":{type:"int",group:"",defaultValue:22},"visibleRowCount":{type:"int",group:"",defaultValue:10},"firstVisibleRow":{type:"int",group:"",defaultValue:0},"selectionMode":{type:"sap.ui.table.SelectionMode",group:"",defaultValue:sap.ui.table.SelectionMode.Multi},"selectedIndex":{type:"int",group:"",defaultValue:-1},"allowColumnReordering":{type:"boolean",group:"",defaultValue:true}},defaultAggregation:"columns",aggregations:{"title":{type:"sap.ui.core.Control",multiple:false},"footer":{type:"sap.ui.core.Control",multiple:false},"toolbar":{type:"sap.ui.commons.Toolbar",multiple:false},"columns":{type:"sap.ui.table.Column",multiple:true,singularName:"column",bindable:"bindable"},"rows":{type:"sap.ui.table.Row",multiple:true,singularName:"row",bindable:"bindable"}},events:{"rowSelectionChange":{},"columnSelect":{}}}});sap.ui.table.Table.M_EVENTS={'rowSelectionChange':'rowSelectionChange','columnSelect':'columnSelect'};jQuery.sap.require("sap.ui.model.SelectionModel");jQuery.sap.require("sap.ui.core.delegate.ItemNavigation");jQuery.sap.require("sap.ui.core.theming.Parameters");jQuery.sap.require("sap.ui.core.ScrollBar");jQuery.sap.require("sap.ui.commons.TextView");jQuery.sap.require("sap.ui.table.Row");
sap.ui.table.Table.prototype.init=function(){this._bRendered=false;this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.table");this._bAccMode=sap.ui.getCore().getConfiguration().getAccessibility();this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL();this._oSelection=new sap.ui.model.SelectionModel();this._oSelection.attachSelectionChanged(this._onSelectionChange,this);this._iColMinWidth=20;this._bCustomRowHeight=false;this._bCustomColHdrHeight=false;this.onThemeChanged();this._iFirstCol=undefined;this._iLastCol=undefined;this._oVSb=new sap.ui.core.ScrollBar(this.getId()+"-vsb",{size:"100%"});this._oVSb.attachScroll(this.onvscroll,this);this._oHSb=new sap.ui.core.ScrollBar(this.getId()+"-hsb",{size:"100%",contentSize:"0px",vertical:false});this._oHSb.attachScroll(this.onhscroll,this);this._bActionMode=false;this._bThreshold=true;};
sap.ui.table.Table.prototype.exit=function(){this._oVSb.destroy();this._oHSb.destroy();this._destroyItemNavigation();this._cleanUpTimers();this._detachEvents();};
sap.ui.table.Table.prototype.onThemeChanged=function(){if(!this._bCustomRowHeight){var r="sap.ui.table.Table:sapUiTableRowHeight";this.setProperty("rowHeight",parseInt(sap.ui.core.theming.Parameters.get(r),10),false);}if(!this._bCustomColHdrHeight){var c="sap.ui.table.Table:sapUiTableColHdrHeight";this.setProperty("columnHeaderHeight",parseInt(sap.ui.core.theming.Parameters.get(c),10),false);}if(this._bRendered){this.invalidate();}};
sap.ui.table.Table.prototype.onBeforeRendering=function(){this._bRendered=false;this._cleanUpTimers();this._detachEvents();};
sap.ui.table.Table.prototype.onAfterRendering=function(){this._bRendered=true;this._bOnAfterRendering=true;var $=this.$();this._updateVSb();this._updateSelection();this._handleResize();this._attachEvents();var c=this.getColumns();for(var i=0,l=c.length;i<l;i++){c[i]._restoreIcons();}this._bOnAfterRendering=false;this._initItemNavigation();};
sap.ui.table.Table.prototype._initItemNavigation=function(){var $=this.$();if(!this._oColHdrItemNav){this._oColHdrItemNav=new sap.ui.core.delegate.ItemNavigation();this._oColHdrItemNav.setCycling(false);this.addDelegate(this._oColHdrItemNav);}this._oColHdrItemNav.setRootDomRef($.find(".sapUiTableColHdrScr").get(0));this._oColHdrItemNav.setItemDomRefs($.find(".sapUiTableCol").get());if(!this._oRowHdrItemNav){this._oRowHdrItemNav=new sap.ui.core.delegate.ItemNavigation();this._oRowHdrItemNav.setTableMode(true);this._oRowHdrItemNav.setColumns(1);this.addDelegate(this._oRowHdrItemNav);}this._oRowHdrItemNav.setRootDomRef($.find(".sapUiTableRowHdrScr").get(0));this._oRowHdrItemNav.setItemDomRefs($.find(".sapUiTableRowHdr td").get());if(!this._oItemNavigation){this._oItemNavigation=new sap.ui.core.delegate.ItemNavigation();this._oItemNavigation.setTableMode(true);this._oItemNavigation.setColumns(this.getColumns().length);this._oItemNavigation.attachEvent(sap.ui.core.delegate.ItemNavigation.Events.AfterFocus,function(e){this._repaintForWebkit();},this);this.addDelegate(this._oItemNavigation);}this._oItemNavigation.setRootDomRef($.find(".sapUiTableCtrlScr").get(0));this._oItemNavigation.setItemDomRefs($.find(".sapUiTableCtrl td").get());};
sap.ui.table.Table.prototype._destroyItemNavigation=function(){if(this._oColHdrItemNav){this._oColHdrItemNav.destroy();this._oColHdrItemNav=undefined;}if(this._oRowHdrItemNav){this._oRowHdrItemNav.destroy();this._oRowHdrItemNav=undefined;}if(this._oItemNavigation){this._oItemNavigation.destroy();this._oItemNavigation=undefined;}};
sap.ui.table.Table.prototype.rerender=function(r){if(r){this._createRows();}sap.ui.core.Control.prototype.rerender.apply(this,arguments);return this;};
sap.ui.table.Table.prototype.setTitle=function(t){var o=t;if(typeof(t)==="string"||t instanceof String){o=new sap.ui.commons.TextView({text:t}).addStyleClass("sapUiTableHdrTitle");}this.setAggregation("title",o);return this;};
sap.ui.table.Table.prototype.setFooter=function(f){var o=f;if(typeof(f)==="string"||f instanceof String){o=new sap.ui.commons.TextView({text:f});}this.setAggregation("footer",o);return this;};
sap.ui.table.Table.prototype.setSelectionMode=function(s){this._oSelection.clearSelection();if(s===sap.ui.table.SelectionMode.Single){this._oSelection.setSelectionMode(sap.ui.model.SelectionModel.SINGLE_SELECTION);}else{this._oSelection.setSelectionMode(sap.ui.model.SelectionModel.MULTI_SELECTION);}this.setProperty("selectionMode",s);return this;};
sap.ui.table.Table.prototype.setRowHeight=function(h){this._bCustomRowHeight=true;this.setProperty("rowHeight",h);return this;};
sap.ui.table.Table.prototype.setColumnHeaderHeight=function(h){this._bCustomColHdrHeight=true;this.setProperty("columnHeaderHeight",h);return this;};
sap.ui.table.Table.prototype.setFirstVisibleRow=function(r,o){var b=this.isBound("rows");r=Math.max(r,0);if(b){r=Math.min(r,Math.max(this._getRowCount()-this.getVisibleRowCount(),0));}if(!o){this._oVSb.setScrollPosition(r);}this.setProperty("firstVisibleRow",r,true);if(b){this.updateAggregation("rows");}return this;};
sap.ui.table.Table.prototype.setVisibleRowCount=function(r){this.setProperty("visibleRowCount",r);if(this._bRendered&&this.getFirstVisibleRow()+r>=this._getRowCount()){this.setProperty("firstVisibleRow",Math.max(0,r-this.getFirstVisibleRow()));}this._createRows();return this;};
sap.ui.table.Table.prototype.bindRows=function(p,t,s,f){return this.bindAggregation("rows",p,{},s,f);};
sap.ui.table.Table.prototype._bindAggregation=function(n,p,t,s,f){sap.ui.core.Element.prototype._bindAggregation.apply(this,arguments);var b=this.getBinding("rows");if(n==="rows"&&b){b.attachSort(this._onBindingSort,this);b.attachFilter(this._onBindingFilter,this);}return this;};
sap.ui.table.Table.prototype.unbindAggregation=function(n,p,t,s,f){var b=this.getBinding("rows");if(n==="rows"&&b){b.detachSort(this._onBindingSort);b.detachFilter(this._onBindingFilter);}return sap.ui.core.Element.prototype.unbindAggregation.apply(this,arguments);};
sap.ui.table.Table.prototype.updateRows=function(b,s,l){s=s===undefined?this.getFirstVisibleRow():s;if(!this._bRendered){this._createRows(s);}else{this.updateRowsAfterOutput(b,s,l);}};
sap.ui.table.Table.prototype.updateRowsAfterOutput=function(b,s,l){var t=this,$=this.$(),o=b.binding;this._sBindingTimer=this._sBindingTimer||jQuery.sap.delayedCall(50,this,function(){this._updateVSb();this._determineVisibleCols();this._updateBindingContexts();this._updateSelection();this._sBindingTimer=undefined;});};
sap.ui.table.Table.prototype._onBindingSort=function(e){this.clearSelection();this.setFirstVisibleRow(0);};
sap.ui.table.Table.prototype._onBindingFilter=function(e){this.clearSelection();this.setFirstVisibleRow(0);};
sap.ui.table.Table.prototype.getFocusInfo=function(){var i=this.$().find(":focus").attr("id");if(i){return{customId:i};}else{return sap.ui.core.Element.prototype.getFocusInfo.apply(this,arguments);}};
sap.ui.table.Table.prototype.applyFocusInfo=function(f){if(f&&f.customId){jQuery.sap.log.warning(f.customId);this.$().find("#"+f.customId).focus();}else{sap.ui.core.Element.prototype.getFocusInfo.apply(this,arguments);}return this;};
sap.ui.table.Table.prototype._attachEvents=function(){var $=this.$();$.find(".sapUiTableColHdrScr").scroll(jQuery.proxy(this._oncolscroll,this));$.find(".sapUiTableCtrlScr").scroll(jQuery.proxy(this._oncntscroll,this));$.find(".sapUiTableRowHdr > tbody > tr").hover(function(){jQuery(this).addClass("sapUiTableRowHvr");var i=jQuery(".sapUiTableRowHdr > tbody > tr").index(this)+2;jQuery(".sapUiTableCtrl > tbody > tr").filter(":nth-child("+i+")").addClass("sapUiTableRowHvr");},function(){jQuery(this).removeClass("sapUiTableRowHvr");jQuery(".sapUiTableCtrl > tbody > tr").removeClass("sapUiTableRowHvr");});$.find(".sapUiTableCtrl > tbody > tr").hover(function(){jQuery(this).addClass("sapUiTableRowHvr");var i=jQuery(".sapUiTableCtrl > tbody > tr").index(this);jQuery(".sapUiTableRowHdr > tbody > tr").filter(":nth-child("+i+")").addClass("sapUiTableRowHvr");},function(){jQuery(this).removeClass("sapUiTableRowHvr");jQuery(".sapUiTableRowHdr > tbody > tr").removeClass("sapUiTableRowHvr");});$.find(".sapUiTableColRsz").mousedown(jQuery.proxy(this._onColumnResizeStart,this));this._sResizeListenerId=sap.ui.core.ResizeHandler.register(this.getDomRef(),jQuery.proxy(this.onresize,this));this._oVSb.bind($.find(".sapUiTableCtrlScr").get(0));};
sap.ui.table.Table.prototype._detachEvents=function(){var $=this.$();$.find(".sapUiTableRowHdrScr").unbind();$.find(".sapUiTableColHdrScr").unbind();$.find(".sapUiTableCtrl > tbody > tr").unbind();$.find(".sapUiTableRowHdr > tbody > tr").unbind();if(this._sResizeListenerId){sap.ui.core.ResizeHandler.deregister(this._sResizeListenerId);this._sResizeListenerId=null;}$.find(".sapUiTableColRsz").unbind();this._oVSb.unbind($.find(".sapUiTableCtrlScr").get(0));};
sap.ui.table.Table.prototype._cleanUpTimers=function(){if(this._sBindingTimer){jQuery.sap.clearDelayedCall(this._sBindingTimer);this._sBindingTimer=undefined;}if(this._sRenderingTimer){jQuery.sap.clearDelayedCall(this._sRenderingTimer);this._sRenderingTimer=undefined;}if(this._sDelayedActionTimer){jQuery.sap.clearDelayedCall(this._sDelayedActionTimer);this._sDelayedActionTimer=undefined;}if(this._sColHdrPosTimer){jQuery.sap.clearDelayedCall(this._sColHdrPosTimer);this._sColHdrPosTimer=undefined;}};
sap.ui.table.Table.prototype._getHeight=function(){var h=this.getRowHeight()*this.getVisibleRowCount();return h;};
sap.ui.table.Table.prototype._createRows=function(s){s=s===undefined?this.getFirstVisibleRow():s;var t=new sap.ui.table.Row();var c=this.getColumns();for(var i=0,l=c.length;i<l;i++){t.addCell(c[i].getTemplate().clone("col"+i));}this.destroyRows();var r=[];var a=undefined;if(this.isBound("rows")){a=this.getBinding("rows").getContexts(s,s+this.getVisibleRowCount(),this._bThreshold?this.getVisibleRowCount()*2:undefined);}for(var i=0;i<this.getVisibleRowCount();i++){var o=t.clone("row"+i+"-"+this.getId());if(a&&a[i]){o.setBindingContext(a[i]);o._bHidden=false;}else{o._bHidden=true;}this.addRow(o);}t.destroy();};
sap.ui.table.Table.prototype._updateHSb=function(){var $=this.$();var c=$.find(".sapUiTableCtrl").width();this._oHSb.setContentSize(c+"px");if(c>$.find(".sapUiTableCtrlScr").width()){$.addClass("sapUiTableHScr");}else{$.removeClass("sapUiTableHScr");}};
sap.ui.table.Table.prototype._updateVSb=function(){var $=this.$();var d=false;if(this.isBound("rows")){var s=Math.max(0,this.getBinding("rows").getLength()-this.getVisibleRowCount());if(s){if(!$.hasClass("sapUiTableVScr")){$.addClass("sapUiTableVScr");d=true;}}else{if($.hasClass("sapUiTableVScr")){$.removeClass("sapUiTableVScr");d=true;}}if(s!==this._oVSb.getSteps()||this.getFirstVisibleRow()!==this._oVSb.getScrollPosition()){this._oVSb.setSteps(s);this._oVSb.rerender();this._oVSb.setScrollPosition(this.getFirstVisibleRow());}}if(d&&!this._bOnAfterRendering){this._handleResize();}};
sap.ui.table.Table.prototype._updateBindingContexts=function(c){var r=this.getRows();var c=this.getBinding("rows").getContexts(this.getFirstVisibleRow(),r.length,this._bThreshold?r.length*2:undefined);for(var i=0,a=this.getRows().length;i<a;i++){var o=c[i];var b=r[i];if(b){var d=b.getCells();var $=d[0].$().parents("tr").first();if(o){for(var e=this._iFirstCol,l=this._iLastCol+1;e<l;e++){d[e].setBindingContext(o);}if($.hasClass("sapUiTableRowHidden")){$.removeClass("sapUiTableRowHidden");}b._bHidden=false;}else{if(!$.hasClass("sapUiTableRowHidden")){$.addClass("sapUiTableRowHidden");}b._bHidden=true;}}}this._repaintForWebkit();};
sap.ui.table.Table.prototype._determineVisibleCols=function(){var $=this.$();if($.hasClass("sapUiTableHScr")){var s=this._getScrollLeft();var i=s+this._getScrollWidth();if(this._iOldScrollLeft!==s||this._iOldScrollRight!==i){var r=this._bRtlMode;var l=r?$.find(".sapUiTableCtrl").width():0;this._iFirstCol=undefined;this._iLastCol=undefined;var t=this;$.find(".sapUiTableCtrlCol > th").each(function(a,e){var w=jQuery(e).width();if(r){l-=w;}if(l+w>=s&&l<=i){if(t._iFirstCol===undefined){t._iFirstCol=a;}t._iLastCol=a;}if(!r){l+=w;}});this._iLastCol=Math.min(this._iLastCol,this.getColumns().length);this._iOldScrollLeft=s;this._iOldScrollRight=i;}}else{this._iFirstCol=0;this._iLastCol=this.getColumns().length-1;}};
sap.ui.table.Table.prototype._repaintForWebkit=function(){var $=this.$();if(jQuery.browser.webkit&&$.css("-webkit-transform")==="none"){var o=$.css("outline");$.css("outline","none").css("-webkit-transform","scale(1)");jQuery.sap.delayedCall(0,$,function(){this.css("-webkit-transform","none").css("outline",o);});}};
sap.ui.table.Table.prototype._getRowCount=function(){if(this.isBound("rows")){return this.getBinding("rows").getLength();}else{return 0;}};
sap.ui.table.Table.prototype._getScrollLeft=function(){if(this.$().hasClass("sapUiTableHScr")){var s=this._oHSb.getScrollPosition()||0;if(jQuery.browser.mozilla&&this._bRtlMode){s=s*-1;}return s;}else{return 0;}};
sap.ui.table.Table.prototype._setScrollLeft=function(l){if(jQuery.browser.mozilla&&this._bRtlMode){l=l*-1;}this._oHSb.setScrollPosition(l);};
sap.ui.table.Table.prototype._getScrollTop=function(){if(this.$().hasClass("sapUiTableVScr")){return this._oVSb.getScrollPosition()||0;}else{return 0;}};
sap.ui.table.Table.prototype._getScrollWidth=function(){return this.$().find(".sapUiTableCtrlScr").width();};
sap.ui.table.Table.prototype._getScrollHeight=function(){return this.$().find(".sapUiTableCtrlScr").height();};
sap.ui.table.Table.prototype._handleResize=function(){var $=this.$();var t=$.find(".sapUiTableCtrl").width();var c=this.getColumns();var a=0;for(var i=0,l=c.length;i<l;i++){var w=c[i].getWidth();var f=parseFloat(w);if(jQuery.sap.endsWith(w,"px")){a+=f;}else if(jQuery.sap.endsWith(w,"%")){a+=f*t/100;}else{a+=this._iColMinWidth;}}if(!this._bOnAfterRendering&&a>window.screen.width){return;}t=$.find(".sapUiTableCtrlScr").width();if(a>t){$.find(".sapUiTableCtrl").width(a);$.find(".sapUiTableCtrlCol > th").each(function(b,e){jQuery(e).width(c[b].getWidth()||"auto");});a=0;$.find(".sapUiTableCtrlCol > th").each(function(b,e){a+=jQuery(e).width();});}else{$.find(".sapUiTableCtrl").width(t);$.find(".sapUiTableCtrlCol > th").each(function(b,e){if(c[b].getWidth()&&!c[b].getFlexible()){jQuery(e).width(c[b].getWidth());}else{jQuery(e).width("auto");}});a=0;$.find(".sapUiTableCtrlCol > th").each(function(b,e){a+=jQuery(e).width();jQuery(e).width(jQuery(e).width());});}$.find(".sapUiTableCtrl").width(a);this._updateHSb();var n=Math.max(a,t)+$.find(".sapUiTableVSb").width();$.find(".sapUiTableColHdr").width(n);this._updateColumnHeader();};
sap.ui.table.Table.prototype._updateColumnHeader=function(u){if(this._sColHdrPosTimer){jQuery.sap.clearDelayedCall(this._sColHdrPosTimer);}var r=this._bRtlMode;var l=this._bRtlMode?"99000px":"-99000px";this._sColHdrPosTimer=jQuery.sap.delayedCall(this._bOnAfterRendering?0:250,this,function(){var t=this,$=this.$();var a=$.find(".sapUiTableColHdrScr .sapUiTableCol");var i=$.width();$.find(".sapUiTableCtrlCol > th").each(function(b,e){var w=jQuery(e).width();var c=jQuery(a.get(b));if(c.length>0){if(!u){c.width(w);}var d=c.position().left+(r?-2:w-3);var f=jQuery.sap.byId(c.attr("id")+"-rsz");if(d>=0&&d<=i){f.css({"left":d});}else if(f.css("left")!==l){f.css({"left":l});}}});this._sColHdrPosTimer=undefined;});};
sap.ui.table.Table.prototype._disableTextSelection=function(){jQuery(document.body).attr("unselectable","on").css({"cursor":"col-resize","-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).bind("selectstart",function(){return false;});};
sap.ui.table.Table.prototype._enableTextSelection=function(){jQuery(document.body).attr("unselectable","off").css({"cursor":"","-moz-user-select":"","-webkit-user-select":"","user-select":""}).unbind("selectstart");};
sap.ui.table.Table.prototype.onresize=function(e){this._handleResize();if(this.isBound("rows")){this.updateAggregation("rows");}};
sap.ui.table.Table.prototype.onvscroll=function(e){this._leaveActionMode();this.setFirstVisibleRow(this._getScrollTop(),true);};
sap.ui.table.Table.prototype.onhscroll=function(e){if(!this._bOnAfterRendering){var $=this.$();var s=this._getScrollLeft();this._bSyncScrollLeft=true;$.find(".sapUiTableColHdrScr").scrollLeft(s);$.find(".sapUiTableCtrlScr").scrollLeft(s);this._bSyncScrollLeft=false;this._updateColumnHeader(true);if(this.isBound("rows")){this.updateAggregation("rows");}}};
sap.ui.table.Table.prototype._oncolscroll=function(e){if(!this._bSyncScrollLeft){var $=this.$().find(".sapUiTableColHdrScr");this._setScrollLeft($.scrollLeft());}};
sap.ui.table.Table.prototype._oncntscroll=function(e){if(!this._bSyncScrollLeft){var $=this.$().find(".sapUiTableCtrlScr");this._setScrollLeft($.scrollLeft());}};
sap.ui.table.Table.prototype.onmousedown=function(e){this._bShowMenu=true;if(this.getAllowColumnReordering()){var $=jQuery(e.target);var a=$.closest(".sapUiTableCol");if(a.length===1){var i=parseInt(a.attr("data-sap-ui-colindex"),10);var c=this.getColumns()[i];this._sDelayedActionTimer=jQuery.sap.delayedCall(200,this,function(){this._bShowMenu=false;this._onColumnMoveStart(c);});}}};
sap.ui.table.Table.prototype.onmouseup=function(e){if(this.$().find(".sapUiTableCtrl td :focus").length>0){this._enterActionMode(this.$().find(".sapUiTableCtrl td :focus").get(0));}else{this._leaveActionMode(e);}};
sap.ui.table.Table.prototype.onclick=function(e){jQuery.sap.clearDelayedCall(this._sDelayedActionTimer);this._onSelect(e);};
sap.ui.table.Table.prototype.onfocusin=function(e){var $=jQuery(e.target);if(!this._bIgnoreFocusIn&&($.hasClass("sapUiTableCtrlBefore")||$.hasClass("sapUiTableCtrlAfter"))){this._leaveActionMode();jQuery(this._oItemNavigation.getFocusedDomRef()||this._oItemNavigation.getRootDomRef()).focus();}else if(jQuery.sap.endsWith(e.target.id,"-rsz")){e.preventDefault();e.stopPropagation();}};
sap.ui.table.Table.prototype._onSelect=function(e){var $=this.$();var a=jQuery(e.target);var b=a.closest(".sapUiTableCol");if(this._bShowMenu&&b.length===1){var i=parseInt(b.attr("data-sap-ui-colindex"),10);var c=this.getColumns()[i];this._onColumnSelect(c);return;}var d=a.closest(".sapUiTableRowHdr tr");if(d.length===1){var i=parseInt(d.attr("data-sap-ui-rowindex"),10);this._onRowSelect(this.getFirstVisibleRow()+i);return;}if(a.attr("id")===this.getId()+"-selall"){if(this._getRowCount()===this.getSelectedIndices().length){this.clearSelection();}else{this.selectAll();}return;}};
sap.ui.table.Table.prototype._onRowSelect=function(r){var s=this.getSelectionMode();if(s!==sap.ui.table.SelectionMode.None){if(s===sap.ui.table.SelectionMode.Single){if(!this.isIndexSelected(r)){this.setSelectedIndex(r);}else{this.clearSelection();}}else{if(!this.isIndexSelected(r)){this.addSelectionInterval(r,r);}else{this.removeSelectionInterval(r,r);}}}};
sap.ui.table.Table.prototype._onColumnSelect=function(c){var e=this.fireEvent("columnSelect",{column:c},true);if(e){c._openMenu();}};
sap.ui.table.Table.prototype._onColumnMoveStart=function(c){this._disableTextSelection();var $=c.$();this._$colGhost=$.clone().removeAttr("id");$.css({"backgroundColor":"white","backgroundImage":"none","opacity":".5"});this._$colGhost.css({"position":"absolute","width":"auto","border":"1px solid red","backgroundColor":"white","left":-10000,"top":-10000,"cursor":"pointer"});this.$().find(".sapUiTableCol").each(function(i,e){var $=jQuery(this);$.css({position:"relative"});$.data("pos",{left:$.position().left,center:$.position().left+$.outerWidth()/2,right:$.position().left+$.outerWidth()});});this._$colGhost.appendTo(document.body);jQuery(document.body).mousemove(jQuery.proxy(this._onColumnMove,this)).mouseup(jQuery.proxy(this._onColumnMoved,this));};
sap.ui.table.Table.prototype._onColumnMove=function(e){var $=this.$();var r=this._bRtlMode;var a=e.pageX-$.offset().left;var d=parseInt(this._$colGhost.attr("data-sap-ui-colindex"),10);var b=this.getColumns()[d].$();var o=this._iNewColPos;this._iNewColPos=d;var t=this;$.find(".sapUiTableCol").each(function(g,h){var f=jQuery(h);var j=parseInt(f.attr("data-sap-ui-colindex"),10);if(f.get(0)!==b.get(0)){var p=f.data("pos");var k=a>=p.left&&a<=p.center;var m=a>=p.center&&a<=p.right;if(!r){t._iNewColPos=k?j:m?j+1:t._iNewColPos;}else{t._iNewColPos=m?j:k?j+1:t._iNewColPos;}if((k||m)&&j>d){t._iNewColPos--;}}});if(o!==this._iNewColPos){for(var i=Math.min(o,this._iNewColPos),l=Math.max(o,this._iNewColPos);i<=l;i++){if(i!==d){this.getColumns()[i].$().stop(true,true).animate({left:"0px"});}}var c=0;if(this._iNewColPos<d){for(var i=this._iNewColPos;i<d;i++){var f=this.getColumns()[i].$();c-=f.outerWidth();f.stop(true,true).animate({left:b.outerWidth()*(r?-1:1)+"px"});}}else{for(var i=d+1,l=this._iNewColPos+1;i<l;i++){var f=this.getColumns()[i].$();c+=f.outerWidth();f.stop(true,true).animate({left:b.outerWidth()*(r?1:-1)+"px"});}}b.stop(true,true).animate({left:c*(r?-1:1)+"px"});}this._$colGhost.css({"left":e.pageX-1,"top":e.pageY-1});};
sap.ui.table.Table.prototype._onColumnMoved=function(e){var d=parseInt(this._$colGhost.attr("data-sap-ui-colindex"),10);var o=this.getColumns()[d];jQuery(document.body).unbind("mousemove",this._onColumnMove).unbind("mouseup",this._onColumnMoved);o.focus();this._$colGhost.remove();this._$colGhost=undefined;this._enableTextSelection();if(this._iNewColPos!==undefined&&this._iNewColPos!==d){this.removeColumn(o);this.insertColumn(o,this._iNewColPos);this._iNewColPos=undefined;this._createRows();}else{o.$().css({"backgroundColor":"","backgroundImage":"","opacity":""});}};
sap.ui.table.Table.prototype._onColumnResizeStart=function(e){this._disableTextSelection();this._$colResize=jQuery(e.target).addClass("sapUiTableColRszActive");jQuery(document.body).mousemove(jQuery.proxy(this._onColumnResize,this)).mouseup(jQuery.proxy(this._onColumnResized,this));};
sap.ui.table.Table.prototype._onColumnResize=function(e){var $=this.$();var r=this._bRtlMode;var c=parseInt(this._$colResize.attr("data-sap-ui-colindex"),10);var o=this.getColumns()[c];var a=o.$();var i=$.find(".sapUiTableCnt").offset().left;var b=e.pageX-i;var d=a.position().left;var p=b-d;var w=r?a.outerWidth()-p:p;w=Math.max(w,this._iColMinWidth);var f=d+(r?a.outerWidth()-w:w);f-=(this._$colResize.width()-2)/2;this._$colResize.css("left",f);o.setProperty("width",w+"px",true);};
sap.ui.table.Table.prototype._onColumnResized=function(e){this._onColumnResize(e);jQuery(document.body).unbind("mousemove",this._onColumnResize).unbind("mouseup",this._onColumnResized);var c=parseInt(this._$colResize.attr("data-sap-ui-colindex"),10);var o=this.getColumns()[c];o.focus();this._$colResize.removeClass("sapUiTableColRszActive");this._$colResize=undefined;this._enableTextSelection();this.invalidate();};
sap.ui.table.Table.prototype._updateSelection=function(){var $=this.$();var f=this.getFirstVisibleRow();var t=this;var r=this._oResBundle;$.find(".sapUiTableRowHdr tr").each(function(i,e){if(t.isIndexSelected(f+i)){jQuery(this).addClass("sapUiTableRowSel").attr("title",r.getText("TBL_ROW_DESELECT")).attr("aria-selected","true");jQuery($.find(".sapUiTableCtrl tr").get(i+1)).addClass("sapUiTableRowSel").attr("aria-selected","true");}else{jQuery(this).removeClass("sapUiTableRowSel").attr("title",r.getText("TBL_ROW_SELECT")).removeAttr("aria-selected");jQuery($.find(".sapUiTableCtrl tr").get(i+1)).removeClass("sapUiTableRowSel").removeAttr("aria-selected");}});};
sap.ui.table.Table.prototype._onSelectionChange=function(e){if(this._oSelection){var l=this._oSelection.getLeadSelectedIndex();this.fireRowSelectionChange({rowIndex:l,rowContext:this.getContextByIndex(l),rowIndices:this._oSelection.getSelectedIndices()});}};
sap.ui.table.Table.prototype.getContextByIndex=function(i){return i>=0&&this.isBound("rows")?this.getBinding("rows").getContexts(i,1)[0]:undefined;};
sap.ui.table.Table.prototype.getSelectedIndex=function(){return this._oSelection.getLeadSelectedIndex();};
sap.ui.table.Table.prototype.setSelectedIndex=function(i){this._oSelection.setSelectionInterval(i,i);this._updateSelection();return this;};
sap.ui.table.Table.prototype.clearSelection=function(){this._oSelection.clearSelection();this._updateSelection();return this;};
sap.ui.table.Table.prototype.selectAll=function(){if(this.isBound("rows")){this._oSelection.setSelectionInterval(0,this.getBinding("rows").getLength()-1);}this._updateSelection();return this;};
sap.ui.table.Table.prototype.getSelectedIndices=function(){return this._oSelection.getSelectedIndices();};
sap.ui.table.Table.prototype.addSelectionInterval=function(i,a){this._oSelection.addSelectionInterval(i,a);this._updateSelection();return this;};
sap.ui.table.Table.prototype.setSelectionInterval=function(i,a){this._oSelection.setSelectionInterval(i,a);this._updateSelection();return this;};
sap.ui.table.Table.prototype.removeSelectionInterval=function(i,a){this._oSelection.removeSelectionInterval(i,a);this._updateSelection();return this;};
sap.ui.table.Table.prototype.isIndexSelected=function(i){return this._oSelection.isSelectedIndex(i);};
sap.ui.table.Table.prototype._scrollNext=function(){if(this.getFirstVisibleRow()<this._getRowCount()-this.getVisibleRowCount()){this.setFirstVisibleRow(Math.min(this.getFirstVisibleRow()+1,this._getRowCount()-this.getVisibleRowCount()));}};
sap.ui.table.Table.prototype._scrollPrevious=function(){if(this.getFirstVisibleRow()>0){this.setFirstVisibleRow(Math.max(this.getFirstVisibleRow()-1,0));}};
sap.ui.table.Table.prototype._scrollPageUp=function(){this.setFirstVisibleRow(Math.max(this.getFirstVisibleRow()-this.getVisibleRowCount(),0));};
sap.ui.table.Table.prototype._scrollPageDown=function(){this.setFirstVisibleRow(Math.min(this.getFirstVisibleRow()+this.getVisibleRowCount(),this._getRowCount()-this.getVisibleRowCount()));};
sap.ui.table.Table.prototype._isTopRow=function(e){var $=jQuery(e.target);return($.parent().attr("data-sap-ui-rowindex")==0);};
sap.ui.table.Table.prototype._isBottomRow=function(e){var $=jQuery(e.target);return($.parent().attr("data-sap-ui-rowindex")==this.getVisibleRowCount()-1);};
sap.ui.table.Table.prototype._enterActionMode=function(d){if(d&&!this._bActionMode){this._bActionMode=true;this.removeDelegate(this._oItemNavigation);jQuery(this._oItemNavigation.getFocusedDomRef()).attr("tabindex","-1");jQuery(d).focus();}};
sap.ui.table.Table.prototype._leaveActionMode=function(e){if(this._bActionMode){this._bActionMode=false;this.addDelegate(this._oItemNavigation);jQuery(this._oItemNavigation.getFocusedDomRef()).attr("tabindex","0");if(e){if(jQuery(e.target).closest("td[tabindex=-1]").length>0){var i=jQuery(this._oItemNavigation.aItemDomRefs).index(jQuery(e.target).closest("td[tabindex=-1]").get(0));this._oItemNavigation.focusItem(i,null);}else{if(jQuery.sap.containsOrEquals(this.$().find(".sapUiTableCtrl").get(0),e.target)){this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex(),null);}}}else{this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex(),null);}}};
sap.ui.table.Table.prototype.onsapselectmodifiers=sap.ui.table.Table.prototype.onsapselect=function(e){this._bShowMenu=true;this._onSelect(e);this._bShowMenu=false;};
sap.ui.table.Table.prototype.onkeydown=function(e){var $=this.$();if(!this._bActionMode&&e.keyCode==jQuery.sap.KeyCodes.F2||e.keyCode==jQuery.sap.KeyCodes.ENTER){if($.find(".sapUiTableCtrl td:focus").length>0){this._enterActionMode($.find(".sapUiTableCtrl td:focus :focusable").get(0));e.preventDefault();e.stopPropagation();}}};
sap.ui.table.Table.prototype.onsapescape=function(e){this._leaveActionMode(e);};
sap.ui.table.Table.prototype.onsaptabprevious=function(e){var $=this.$();if(this._bActionMode){if($.find(".sapUiTableCtrl").firstFocusableDomRef()===e.target){$.find(".sapUiTableCtrl").lastFocusableDomRef().focus();e.preventDefault();e.stopPropagation();}}else{if(this._oItemNavigation.getFocusedDomRef()===e.target){this._bIgnoreFocusIn=true;$.find(".sapUiTableCtrlBefore").focus();this._bIgnoreFocusIn=false;}}};
sap.ui.table.Table.prototype.onsaptabnext=function(e){var $=this.$();if(this._bActionMode){if($.find(".sapUiTableCtrl").lastFocusableDomRef()===e.target){$.find(".sapUiTableCtrl").firstFocusableDomRef().focus();e.preventDefault();e.stopPropagation();}}else{if(this._oItemNavigation.getFocusedDomRef()===e.target){this._bIgnoreFocusIn=true;$.find(".sapUiTableCtrlAfter").focus();this._bIgnoreFocusIn=false;}}};
sap.ui.table.Table.prototype.onsapdown=function(e){if(!this._bActionMode&&this._isBottomRow(e)){this._scrollNext();}};
sap.ui.table.Table.prototype.onsapup=function(e){if(!this._bActionMode&&this._isTopRow(e)){this._scrollPrevious();}};
sap.ui.table.Table.prototype.onsappagedown=function(e){if(!this._bActionMode&&this._isBottomRow(e)){this._scrollPageDown();}};
sap.ui.table.Table.prototype.onsappageup=function(e){if(!this._bActionMode&&this._isTopRow(e)){this._scrollPageUp();}};
