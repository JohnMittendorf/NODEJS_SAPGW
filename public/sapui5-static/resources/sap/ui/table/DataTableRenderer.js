/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ui.table.DataTableRenderer");sap.ui.table.DataTableRenderer={};
sap.ui.table.DataTableRenderer.render=function(o,c){var a=o;var r=sap.ui.table.DataTableRenderer;a.write("<div");if(c.bIsACC){var b=[];if(c.getToolbar()){b.push(c.getToolbar().getId());}b.push(c.getId()+"-table");a.writeAttribute("aria-owns",b.join(" "));a.writeAttribute("aria-readonly",!c.getEditable());}a.writeControlData(c);a.addClass("sapUiTbl");if(!c.getTitle()){a.addClass("sapUiTblNoHeader");}a.writeClasses();if(c.getWidth()){a.addStyle("width",c.getWidth());}a.writeStyles();a.write(">");r.renderTitle(a,c);r.renderToolbar(a,c);r.renderTable(a,c);r.renderFooter(a,c);a.write("</div>");if(c.bOutput){c._bNeedsUpdateBindings=true;}};
sap.ui.table.DataTableRenderer.renderTitle=function(r,c){if(c.getTitle()){r.write("<div");r.addClass("sapUiTblHdr");r.writeClasses();if(c.bIsACC){r.writeAttribute("role","heading");}r.write(">");r.writeEscaped(c.getTitle());r.write("</div>");}};
sap.ui.table.DataTableRenderer.renderToolbar=function(r,c){if(c.getToolbar()){r.renderControl(c.getToolbar());}};
sap.ui.table.DataTableRenderer.renderTable=function(r,c){var s=c.getSelectionMode()!=sap.ui.table.SelectionMode.None;var b=c.getSelectionMode()===sap.ui.table.SelectionMode.All||c.getSelectionMode()===sap.ui.table.SelectionMode.Multi;var o=c.getBinding();r.write("<div");r.writeAttribute("class","sapUiTblCtrlCnt");r.write(">");r.write("<div");r.writeAttribute("class","sapUiTblCtrlScr");r.write(">");r.write("<table");r.writeAttribute("id",c.getId()+"-table");r.writeAttribute("class","sapUiTblCtrl");r.write(">");r.write("<thead><tr>");if(s){r.write("<th class=\"sapUiTblColSelCell sapUiTblColFirst\"");if(c.bIsACC){r.writeAttribute("role","columnheader");}if(b){r.writeAttribute("title",c.oResBundle.getText("TBL_SELECT_ALL"));}r.write(">");if(b){r.write("<div id=\""+c.getId()+"-selall\" class=\"sapUiTblColSelAll\"></div>");}r.write("</th>");}var h=c.getColumns();var a=h.length>0;var i=Math.max(1,h.length);for(var d=0;d<i;d++){r.write("<th");if(c.bIsACC){r.writeAttribute("role","columnheader");}if(!s&&d===0){r.addClass("sapUiTblColFirst");}if(d===i-1){r.addClass("sapUiTblColLast");}r.writeClasses();var w=h[d]&&h[d].getWidth();if(w){r.addStyle("width",w);}r.writeStyles();var e=h[d]&&h[d].getId();if(e){r.writeElementData(h[d])}r.writeAttribute("data-sap-ui-colindex",d);r.write(">");if(e){r.write("<div id=\""+c.getId()+"_resize_"+e+"\" class=\"sapUiTblColResize\"");if(h[d]&&!h[d].getResizable()){r.write(" style=\"cursor: auto;\"");}r.write("></div>");r.write("<div id=\""+c.getId()+"_icons_"+e+"\" class=\"sapUiTblColIcons\"></div>");}r.write("<div class=\"sapUiTblCnt\"");r.writeStyles();r.write(">");var l=h[d]&&h[d].getLabel();if(l){r.renderControl(l);}r.write("</div>");r.write("</th>");}r.write("</tr></thead>");var f=c.getFirstVisibleRow();var v=c.getCurrentVisibleRowCount();var g=o?o.getLength():0;var m=Math.max(Math.min(f,g),0);var j=Math.max(Math.min(m+v,g),m);if(j-m!=v){m=Math.max(j-v,0);}c.setProperty("firstVisibleRow",m,true);var k=[];if(o){k=o.getContexts(m,j,c.getThreshold());}r.write("<tbody>");c._aRows=[];c._destroyControls(true);var n=c.getHierarchical(),p=0,q=0;for(var t=0;t<v;t++){c._aRows[t]=[];r.write("<tr ");r.writeAttribute("id",c.getId()+"-row"+t);if(c.bIsACC){r.writeAttribute("role","row");r.writeAttribute("aria-label",c.oResBundle.getText("TBL_ROW_SELECT")+" "+t);}r.writeAttribute("data-sap-ui-rowindex",t);if(n&&o){q=o.getLevel(k[t]);p=q*17;r.writeAttribute("data-sap-ui-level",q);}r.write(">");if(s){r.write("<td id=\"");r.write(c.getId()+"-rowsel"+t);r.write("\" class=\"sapUiTblRowSelCell sapUiTblColFirst\" role=\"rowheader\"></td>");}for(var d=0;d<i;d++){r.write("<td role=\"gridcell\" headers=\"");r.write(c.getColumns()[d].getId());r.write("\"");if(!s&&d===0){r.addClass("sapUiTblColFirst");}if(d===i-1){r.addClass("sapUiTblColLast");}r.writeClasses();r.write("><div class=\"sapUiTblCnt\" ");if(c.getRowHeight()){r.addStyle("height",c.getRowHeight());}if(h[d]){var u=sap.ui.table.DataTableRenderer.getHAlign(h[d].getHAlign(),c.bRTL);if(u){r.addStyle("text-align",u);}}r.writeStyles();r.write(">");if(d===0&&n){var x="sapUiTblTreeIconLeaf";r.write("<div class=\"sapUiTblTreeIcon "+x+"\" tabindex=\"-1\" style=\"margin-left:"+p+"px;\"></div>");}var y=h[d]&&h[d].getTemplate();if(y){y=y.clone("_row_"+t+"_col_"+d);if(y.setEditable){y.setEditable(c.getEditable());}if(k[t]){y.setBindingContext(k[t]);}c._addControl(y,true);r.renderControl(y);c._aRows[t][d]=y;}r.write("</div></td>");}r.write("</tr>");}r.write("</tbody>");r.write("</table>");if(a){r.write("<div class=\"sapUiTblVSb\">");r.write("<div id=\""+c.getId()+"-vsbcont\">");r.write("<div id=\""+c.getId()+"-vsb\">");r.write("<img id=\""+c.getId()+"-vsbimg\" src=\"");r.write(sap.ui.resource('sap.ui.core','themes/base/img/1x1.gif'));r.write("\"></img>");r.write("</div>");r.write("</div>");r.write("</div>");}r.write("<div class=\"sapUiTblCtrlAfter\" tabindex=\"0\"></div>");r.write("</div>");r.write("</div>");};
sap.ui.table.DataTableRenderer.renderFooter=function(r,c){var e=c.getExpandedVisibleRowCount();if(e&&e>c.getVisibleRowCount()){r.write("<div class=\"sapUiTblFtr\">&nbsp;");var t=c.getExpanded()?c.oResBundle.getText("TBL_SHOW_LESS"):c.oResBundle.getText("TBL_SHOW_MORE");var s=c.getExpanded()?"sapUiTblExpLess":"sapUiTblExpMore";r.write("<a id=\""+c.getId()+"_expand\" class=\"sapUiTblExp\" href=\"javascript:void(0);\">");r.write("<span class=\""+s+"\"></span>");r.write("<span class=\"sapUiTblExpText\">"+t+"</span></a>");r.write("</div>");}};
sap.ui.table.DataTableRenderer.getHAlign=function(h,r){switch(h){case sap.ui.commons.layout.HAlign.Center:return"center";case sap.ui.commons.layout.HAlign.End:case sap.ui.commons.layout.HAlign.Right:return r?"left":"right";}return r?"right":"left";};
