/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ui.commons.layout.PositionContainer");jQuery.sap.require("sap.ui.commons.library");jQuery.sap.require("sap.ui.core.Element");sap.ui.core.Element.extend("sap.ui.commons.layout.PositionContainer",{metadata:{publicMethods:["updatePosition"],library:"sap.ui.commons",properties:{"top":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},"bottom":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},"left":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},"right":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},"centerHorizontally":{type:"boolean",group:"Dimension",defaultValue:false},"centerVertically":{type:"boolean",group:"Dimension",defaultValue:false}},defaultAggregation:"control",aggregations:{"control":{type:"sap.ui.core.Control",multiple:false}}}});(function(){sap.ui.commons.layout.PositionContainer.prototype.setControl=function(o){c(this);if(this.getDomRef()){this.setAggregation("control",o,true);n(this,o?"CTRL_CHANGE":"CTRL_REMOVE");}else{if(this.getParent()&&this.getParent().getDomRef()){this.setAggregation("control",o,true);if(o){n(this,"CTRL_ADD");}}else{this.setAggregation("control",o);}}return this;};sap.ui.commons.layout.PositionContainer.prototype.destroyControl=function(){c(this);var e=!!this.getDomRef();this.destroyAggregation("control",e);if(e){n(this,"CTRL_REMOVE");}return this;};sap.ui.commons.layout.PositionContainer.prototype.setTop=function(t){s(this,"top",t,true);return this;};sap.ui.commons.layout.PositionContainer.prototype.setBottom=function(e){s(this,"bottom",e,true);return this;};sap.ui.commons.layout.PositionContainer.prototype.setLeft=function(l){s(this,"left",l,true);return this;};sap.ui.commons.layout.PositionContainer.prototype.setRight=function(r){s(this,"right",r,true);return this;};sap.ui.commons.layout.PositionContainer.prototype.setCenterHorizontally=function(e){s(this,"centerHorizontally",e,true);return this;};sap.ui.commons.layout.PositionContainer.prototype.setCenterVertically=function(e){s(this,"centerVertically",e,true);return this;};sap.ui.commons.layout.PositionContainer.prototype.updatePosition=function(p){if(!p){p={};}s(this,"centerHorizontally",p.centerHorizontally?p.centerHorizontally:null);s(this,"centerVertically",p.centerVertically?p.centerVertically:null);s(this,"left",p.left?p.left:null);s(this,"right",p.right?p.right:null);s(this,"top",p.top?p.top:null);var e=s(this,"bottom",p.bottom?p.bottom:null);if(e){n(this,"CTRL_POS");}};sap.ui.commons.layout.PositionContainer.prototype.getComputedPosition=function(){var t=this.getTop();var e=this.getBottom();var l=this.getLeft();var r=this.getRight();var w=null;var h=null;var o=this.getControl();if(o){if(this.getCenterHorizontally()){l="50%";r=null;}else{if(!a(this.getParent(),o,"width","left",l,"right",r)){r=undefined;}if(!l&&!r){l="0px";}}if(this.getCenterVertically()){t="50%";e=null;}else{if(!a(this.getParent(),o,"height","top",t,"bottom",e)){e=undefined;}if(!t&&!e){t="0px";}}w=d(o,"width");h=d(o,"height");}return{top:t,bottom:e,left:l,right:r,width:w,height:h};};sap.ui.commons.layout.PositionContainer.createPosition=function(o,p){var e=new sap.ui.commons.layout.PositionContainer();e.setControl(o);if(p){if(p.left){e.setLeft(p.left);}if(p.right){e.setRight(p.right);}if(p.top){e.setTop(p.top);}if(p.bottom){e.setBottom(p.bottom);}if(p.centerHorizontally){e.setCenterHorizontally(p.centerHorizontally);}if(p.centerVertically){e.setCenterVertically(p.centerVertically);}}return e;};sap.ui.commons.layout.PositionContainer.prototype.reinitializeEventHandlers=function(e){if(this._sResizeListenerId){sap.ui.core.ResizeHandler.deregister(this._sResizeListenerId);this._sResizeListenerId=null;}if(!e&&this.getDomRef()&&(this.getCenterHorizontally()||this.getCenterVertically())){var t=this;var o=function(){var r=jQuery(t.getDomRef());if(t.getCenterHorizontally()){r.css("margin-left","-"+r.width()/2+"px");}if(t.getCenterVertically()){r.css("margin-top","-"+r.height()/2+"px");}};this._sResizeListenerId=sap.ui.core.ResizeHandler.register(this.getDomRef(),o);o();}};sap.ui.commons.layout.PositionContainer.prototype.exit=function(p){this.reinitializeEventHandlers(true);};var s=function(t,p,v,e){var f=!!t.getDomRef();t.setProperty(p,v,f);if(f&&e){n(t,"CTRL_POS");}return f;};var n=function(t,e){var l=t.getParent();if(l){l.contentChanged(t,e);}};var c=function(t){var o=t.getControl();if(o){sap.ui.commons.layout.AbsoluteLayout.cleanUpControl(o);}};var a=function(l,o,p,e,v,f,h){if(v&&h){if(g(o,p)){var i=o[b(p)]();if(!(!i||i==""||i=="auto"||i=="inherit")){jQuery.sap.log.warning("Position "+f+"="+h+" ignored, because child control "+o.getId()+" has fixed "+p+" ("+i+").","","AbsoluteLayout '"+(l?l.getId():"_undefined")+"'");return false;}}else{jQuery.sap.log.warning("Position "+f+"="+h+" ignored, because child control "+o.getId()+" not resizable.","","AbsoluteLayout '"+(l?l.getId():"_undefined")+"'");return false;}}return true;};var g=function(o,p){var e=o.getMetadata().getAllProperties()[p];if(e&&sap.ui.base.DataType.getType(e.type)==sap.ui.base.DataType.getType("sap.ui.core.CSSSize")){return e;}return null;};var b=function(p){return"get"+p.substring(0,1).toUpperCase()+p.substring(1);};var d=function(o,e){if(g(o,e)){var v=o[b(e)]();if(v&&jQuery.sap.endsWith(v,"%")){return v;}}return null;};}());
