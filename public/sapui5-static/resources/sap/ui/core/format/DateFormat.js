/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2012 SAP AG. All rights reserved
 */
jQuery.sap.declare("sap.ui.core.format.DateFormat");jQuery.sap.require("sap.ui.core.LocaleData");
sap.ui.core.format.DateFormat=function(){throw new Error();};
sap.ui.core.format.DateFormat.oDefaultDateFormat={style:"medium"};sap.ui.core.format.DateFormat.oDefaultDateTimeFormat={style:"medium"};sap.ui.core.format.DateFormat.oDefaultTimeFormat={style:"medium"};
sap.ui.core.format.DateFormat.getInstance=function(f,l){return this.getDateInstance(f,l);};
sap.ui.core.format.DateFormat.getDateInstance=function(f,l){var o=this.createInstance(f,l);o.oFormatOptions=jQuery.extend(false,{},this.oDefaultDateFormat,f);if(!o.oFormatOptions.pattern){o.oFormatOptions.pattern=o.oLocaleData.getDatePattern(o.oFormatOptions.style);}o.init();return o;};
sap.ui.core.format.DateFormat.getDateTimeInstance=function(f,l){var o=this.createInstance(f,l);o.oFormatOptions=jQuery.extend(false,{},this.oDefaultDateTimeFormat,f);if(!o.oFormatOptions.pattern){var d=o.oLocaleData.getDateTimePattern(o.oFormatOptions.style),s=o.oLocaleData.getDatePattern(o.oFormatOptions.style),t=o.oLocaleData.getTimePattern(o.oFormatOptions.style);o.oFormatOptions.pattern=d.replace("{1}",s).replace("{0}",t);}o.init();return o;};
sap.ui.core.format.DateFormat.getTimeInstance=function(f,l){var o=this.createInstance(f,l);o.oFormatOptions=jQuery.extend(false,{},this.oDefaultTimeFormat,f);if(!o.oFormatOptions.pattern){o.oFormatOptions.pattern=o.oLocaleData.getTimePattern(o.oFormatOptions.style);}o.init();return o;};
sap.ui.core.format.DateFormat.createInstance=function(f,l){var o=jQuery.sap.newObject(this.prototype);if(f instanceof sap.ui.core.Locale){l=f;f=undefined;}if(!l){l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();}o.oLocale=l;o.oLocaleData=sap.ui.core.LocaleData.getInstance(l);return o;};
sap.ui.core.format.DateFormat.prototype.init=function(){this.aMonthsAbbrev=this.oLocaleData.getMonths("abbreviated");this.aMonthsWide=this.oLocaleData.getMonths("wide");this.aDaysAbbrev=this.oLocaleData.getDays("abbreviated");this.aDaysWide=this.oLocaleData.getDays("wide");this.aDayPeriods=this.oLocaleData.getDayPeriods("abbreviated");this.aFormatArray=this.parseJavaDateFormat(this.oFormatOptions.pattern);};
sap.ui.core.format.DateFormat.prototype.oStates={"G":"era","y":"year","Y":"weekYear","M":"month","w":"weekInYear","W":"weekInMonth","D":"dayInYear","d":"day","F":"dayOfWeekInMonth","E":"dayNameInWeek","u":"dayNumberOfWeek","a":"amPmMarker","H":"hour0_23","k":"hour1_24","K":"hour0_11","h":"hour1_12","m":"minute","s":"second","S":"millisecond","z":"timezoneGeneral","Z":"timezoneRFC822","X":"timezoneISO8601"};
sap.ui.core.format.DateFormat.prototype.format=function(d){var b=[],p,h=d.getHours(),t=Math.abs(d.getTimezoneOffset()),a=d.getTimezoneOffset()>0,c=Math.floor(t/60),m=t%60,y,w,r;for(var i=0;i<this.aFormatArray.length;i++){p=this.aFormatArray[i];switch(p.sType){case"text":b.push(p.sValue);break;case"day":b.push(jQuery.sap.padLeft(String(d.getDate()),"0",p.iDigits));break;case"dayNameInWeek":if(p.iDigits<4){b.push(this.aDaysAbbrev[d.getDay()]);}else if(p.iDigits>=4){b.push(this.aDaysWide[d.getDay()]);}break;case"dayNumberOfWeek":b.push(d.getDay()||7);break;case"month":if(p.iDigits==3){b.push(this.aMonthsAbbrev[d.getMonth()]);}else if(p.iDigits>=4){b.push(this.aMonthsWide[d.getMonth()]);}else{b.push(jQuery.sap.padLeft(String(d.getMonth()+1),"0",p.iDigits));}break;case"era":b.push("AD");break;case"year":case"weekYear":y=""+d.getFullYear();if(p.iDigits==2&&y.length>2){y=y.substr(y.length-2);}b.push(jQuery.sap.padLeft(y,"0",p.iDigits));break;case"weekInYear":w="";if(d.getWeek){w+=d.getWeek();}b.push(jQuery.sap.padLeft(w,"0",p.iDigits));break;case"hour0_23":b.push(jQuery.sap.padLeft(String(h),"0",p.iDigits));break;case"hour1_24":if(h==0){h=24;}b.push(jQuery.sap.padLeft(String(h),"0",p.iDigits));break;case"hour0_11":if(h>11){h-=12;}b.push(jQuery.sap.padLeft(String(h),"0",p.iDigits));break;case"hour1_12":if(h>12){h-=12;}else if(h==0){h=12;}b.push(jQuery.sap.padLeft(String(h),"0",p.iDigits));break;case"minute":b.push(jQuery.sap.padLeft(String(d.getMinutes()),"0",p.iDigits));break;case"second":b.push(jQuery.sap.padLeft(String(d.getSeconds()),"0",p.iDigits));break;case"millisecond":b.push(jQuery.sap.padLeft(String(d.getMilliseconds()),"0",p.iDigits));break;case"amPmMarker":var e=d.getHours()<12?0:1;b.push(this.aDayPeriods[e]);break;case"timezoneGeneral":if(p.iDigits>3&&d.getTimezoneLong){b.push(d.getTimezoneLong());break;}else if(d.getTimezoneShort){b.push(d.getTimezoneShort());break;}b.push("GMT");case"timezoneISO8601":if(t!=0){b.push(a?"-":"+");b.push(jQuery.sap.padLeft(String(c),"0",2));b.push(":");b.push(jQuery.sap.padLeft(String(m),"0",2));}break;case"timezoneRFC822":if(t!=0){b.push(a?"-":"+");b.push(jQuery.sap.padLeft(String(c),"0",2));b.push(jQuery.sap.padLeft(String(m),"0",2));}break;}}r=b.join("");if(sap.ui.getCore().getConfiguration().getOriginInfo()){r=new String(r);r.originInfo={source:"Common Locale Data Repository",locale:this.oLocale.toString(),style:this.oFormatOptions.style,pattern:this.oFormatOptions.pattern};}return r;};
sap.ui.core.format.DateFormat.prototype.parse=function(v){var d=new Date(0),a=0,e=false,b=null,m=null,y=null,h=null,c=null,s=null,f=null,p=false,o,g,t=null;function j(x){return x>=48&&x<=57;}function k(x){var z=0;while(z<x&&j(v.charCodeAt(a+z))){z++;}return v.substr(a,z);}function l(x){var i;for(i=0;i<x.length;i++){if(v.indexOf(x[i],a)==a){return x[i];}}return null;}function n(x){var i;for(i=0;i<x.length;i++){if(v.indexOf(x[i],a)==a){return i;}}return null;}function q(x){var z=v.charAt(a)=="+"?-1:1;a++;g=k(2);var A=parseInt(g,10);a=a+2;if(x){a++;}g=k(2);a=a+2;t=parseInt(g,10);t=(t+60*A)*z;}for(var i=0;i<this.aFormatArray.length;i++){o=this.aFormatArray[i];switch(o.sType){case"text":if(v.indexOf(o.sValue,a)==a){a+=o.sValue.length;}break;case"day":g=k(Math.max(o.iDigits,2));a+=g.length;b=parseInt(g,10);break;case"dayNameInWeek":g=l(this.aDaysWide);if(!g){g=l(this.aDaysAbbrev);}if(g){a+=g.length;}break;case"dayNumberOfWeek":g=k(o.iDigits);a+=g.length;break;case"month":if(o.iDigits<3){g=k(Math.max(o.iDigits,2));m=parseInt(g,10)-1;a+=g.length;}else{m=n(this.aMonthsWide);if(m!=null){a+=this.aMonthsWide[m].length;}else{m=n(this.aMonthsAbbrev);if(m!=null){a+=this.aMonthsAbbrev[m].length;}}}break;case"era":break;case"year":case"weekYear":if(o.iDigits==1){g=k(4);a+=g.length;}else if(o.iDigits==2){g=k(2);if(g.length==2){y=parseInt(g,10);if(y<90){g="20"+g;}else{g="19"+g;}a+=2;}else{a+=g.length;}}else{g=k(o.iDigits);a+=g.length;}y=parseInt(g,10);break;case"weekInYear":break;case"hour0_23":g=k(Math.max(o.iDigits,2));a+=g.length;h=parseInt(g,10);break;case"hour1_24":g=k(Math.max(o.iDigits,2));a+=g.length;h=parseInt(g,10);if(h==24){h=0;}break;case"hour0_11":g=k(Math.max(o.iDigits,2));a+=g.length;h=parseInt(g,10);break;case"hour1_12":g=k(Math.max(o.iDigits,2));a+=g.length;h=parseInt(g,10);if(h==12){h=0;}break;case"minute":g=k(Math.max(o.iDigits,2));a+=g.length;c=parseInt(g,10);break;case"second":g=k(Math.max(o.iDigits,2));a+=g.length;s=parseInt(g,10);break;case"millisecond":g=k(Math.max(o.iDigits,3));g=jQuery.sap.padRight(g,"0",3);a+=g.length;f=parseInt(g,10);break;case"amPmMarker":var r=this.aDayPeriods[0],u=this.aDayPeriods[1];if(v.indexOf(r,a)==a){p=false;a+=2;}else if(v.indexOf(u,a)==a){p=true;a+=2;}break;case"timezoneGeneral":var w=v.substring(a,a+3);if(w==="GMT"||w==="UTC"){a=a+3;}else if(v.substring(a,a+2)==="UT"){a=a+2;}else if(v.charAt(a)=="Z"){a=a+1;t=0;break;}else{jQuery.sap.log.error(v+" cannot be parsed correcly by sap.ui.core.format.DateFormat: The given timezone is not supported!");break;}case"timezoneISO8601":q(true);break;case"timezoneRFC822":q(false);break;}}if(p){h+=12;}if(t!=null){d.setUTCFullYear(y||1970);d.setUTCMonth(m||0);d.setUTCDate(b||1);d.setUTCHours(h||0);d.setUTCMinutes((c||0)+t);d.setUTCSeconds(s||0);d.setUTCMilliseconds(f||0);}else{d.setFullYear(y||1970);d.setMonth(m||0);d.setDate(b||1);d.setHours(h||0);d.setMinutes(c||0);d.setSeconds(s||0);d.setMilliseconds(f||0);}return d;};
sap.ui.core.format.DateFormat.prototype.parseJavaDateFormat=function(f){var a=[],i,q=false,c=null,s="",n="";for(i=0;i<f.length;i++){var b=f.charAt(i),d,p,e;if(q){if(b=="'"){p=f.charAt(i-1);e=f.charAt(i-2);d=f.charAt(i+1);if(p=="'"&&e!="'"){q=false;}else if(d=="'"){i+=1;}else{q=false;continue;}}if(s=="text"){c.sValue+=b;}else{c={sType:"text",sValue:b};a.push(c);s="text";}}else{if(b=="'"){q=true;}else if(this.oStates[b]){n=this.oStates[b];if(s==n){c.iDigits++;}else{c={sType:n,iDigits:1};a.push(c);s=n;}}else{if(s=="text"){c.sValue+=b;}else{c={sType:"text",sValue:b};a.push(c);s="text";}}}}return a;};
